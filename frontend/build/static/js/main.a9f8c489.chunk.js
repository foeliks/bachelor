(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{197:function(e,t,a){e.exports=a(338)},202:function(e,t,a){},338:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(41),o=a.n(r),c=a(22),i=(a(147),a(202),a(77)),s=a(33),u=a(91),m=a(344),d=a(347),p=a(345),b=a(63),f=a(104),g=a(349),h=a(351);var E=function(e){return l.a.createElement("div",null,l.a.createElement(u.a,{justify:"space-between",align:"middle"},l.a.createElement(m.a,{title:"Themen"}),l.a.createElement("div",{style:{marginRight:"16px"}},e.values.sumStars," ",l.a.createElement(g.a,null))),l.a.createElement(d.a,null,e.values.categories.map((function(t){return l.a.createElement(d.a.Panel,{key:t.id,header:t.title,extra:l.a.createElement(p.a,{percent:t.progress.toFixed()})},t.tasks.map((function(a){return l.a.createElement("div",{style:{marginTop:"10px"},key:a.id},l.a.createElement(u.a,{justify:"space-between",align:"middle"},l.a.createElement(u.a,{align:"middle",style:{marginLeft:"10px",color:"grey"}},l.a.createElement(b.a,{danger:a.required_employee_rank&&e.values.employeeRank.id<a.required_employee_rank.id||a.achieve_employee_rank&&!e.functions.solvedNeededTasks(t.id)||a.required_stars&&e.values.sumStars<a.required_stars,href:"/task/".concat(a.id),style:a.solved?{backgroundColor:e.values.robobGreen,color:"white",marginRight:"10px"}:{marginRight:"10px"}},"Aufgabe ",a.id),a.required_employee_rank&&e.values.employeeRank.id<a.required_employee_rank.id?'(Mitarbeiter Rang "'.concat(a.required_employee_rank.title,'" ben\xf6tigt)'):a.achieve_employee_rank&&!e.functions.solvedNeededTasks(t.id)?"(Nicht alle Pflicht-Aufgaben gel\xf6st)":a.required_stars&&e.values.sumStars<a.required_stars?l.a.createElement("div",null,"(",a.required_stars,"  ",l.a.createElement(g.a,null)," ben\xf6tigt)"):a.achieve_employee_rank?"(Rang Aufstieg: ".concat(a.achieve_employee_rank.title,")"):a.optional?"(optional)":""),a.solved&&l.a.createElement("div",{style:{float:"right"}},3===a.stars?l.a.createElement(g.a,null):l.a.createElement(h.a,null),a.stars>=2?l.a.createElement(g.a,null):l.a.createElement(h.a,null),l.a.createElement(g.a,null))))})))}))),e.values.sumStars>0&&l.a.createElement(f.a,{checked:e.values.ignoreOptional,disabled:0===e.values.nextTaskWithoutOptional,style:{marginTop:"20px"},onChange:function(t){return e.functions.setIgnoreOptional(t.target.checked)}},"Optionale Aufgaben ignorieren"),l.a.createElement("br",null),l.a.createElement(b.a,{style:{marginTop:"10px"},type:"primary",href:"/task/".concat(e.values.ignoreOptional?e.values.nextTaskWithoutOptional:e.values.nextTaskWithOptional)},e.values.sumStars?"N\xe4chste Aufgabe":"Los geht's"))},v=a(53),y=a(343),k=a(127),O=a(342),j=a(346),S=a(340);var w=function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(window.innerWidth<=1e3),s=Object(c.a)(i,2),d=s[0],p=s[1];Object(n.useEffect)((function(){var e=function(){window.innerWidth<=1300&&!1===d?p(!0):window.innerWidth>=1300&&!0===d&&p(!1)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var f={0:l.a.createElement(O.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:18}},{onFinish:function(t){fetch("http://localhost:8000/token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){localStorage.setItem("token",t.token),e.functions.setLoggedIn(!0)})).catch((function(e){return console.error(e)}))}}),l.a.createElement(O.a.Item,{label:"Benutzername",name:"username",rules:[{required:!0,message:"Bitte geben Sie Ihren Benutzernamen ein!"}]},l.a.createElement(j.a,null)),l.a.createElement(O.a.Item,{label:"Passwort",name:"password",rules:[{required:!0,message:"Bitte geben Sie ein Passwort ein!"}]},l.a.createElement(j.a.Password,null)),l.a.createElement(O.a.Item,{wrapperCol:{offset:6}},l.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Anmelden"))),1:l.a.createElement(O.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:18}},{onFinish:function(t){fetch("http://localhost:8000/robob/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){localStorage.setItem("token",t.token),e.functions.setLoggedIn(!0)})).catch((function(e){return console.error(e)}))}}),l.a.createElement(O.a.Item,{label:"Email-Adresse",name:"email",rules:[{required:!0,message:"Bitte geben Sie Ihre Email-Adresse ein!"},{type:"email",message:"Die eingegebene Email-Adresse ist ung\xfcltig"}]},l.a.createElement(j.a,null)),l.a.createElement(O.a.Item,{label:"Benutzername",name:"username",rules:[{required:!0,message:"Bitte geben Sie Ihren Benutzernamen ein!"}]},l.a.createElement(j.a,null)),l.a.createElement(O.a.Item,{label:"Passwort",name:"password",rules:[{required:!0,message:"Bitte geben Sie ein Passwort ein!"}]},l.a.createElement(j.a.Password,null)),l.a.createElement(O.a.Item,{label:"Passwort wiederholen",name:"repeatPassword",rules:[{required:!0,message:"Bitte wiederholen Sie Ihr Passwort!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("Die eingegebenen Passw\xf6rter stimmen nicht \xfcberein"):Promise.resolve()}}}]},l.a.createElement(j.a.Password,null)),l.a.createElement(O.a.Item,{wrapperCol:{offset:6}},l.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Registrieren")))},g=l.a.createElement(b.a,{onClick:function(){localStorage.removeItem("token"),e.functions.setLoggedIn(!1)}},"Logout");return l.a.createElement(S.a,null,l.a.createElement(S.a.Content,null,l.a.createElement(m.a,{className:"site-page-header",title:"Melde dich an, um anzufangen"}),e.values.loggedIn?g:d?l.a.createElement(y.a,{tabList:[{key:0,tab:"Anmelden"},{key:1,tab:"Registrieren"}],onTabChange:function(e){return o(e)}},f[r]):l.a.createElement(y.a,null,l.a.createElement(u.a,null,l.a.createElement(v.a,{flex:1},f[0]),l.a.createElement(v.a,{flex:1},f[1])))))};var _=function(e){return l.a.createElement("div",null,l.a.createElement(m.a,{title:"Willkommen bei Robob".concat(e.values.loggedIn?", ".concat(e.values.username):"","!")}),l.a.createElement("p",null,"Hier kannst Du die Grundlagen in JavaScript erlernen! Dazu hast Du die Wahl zwischen zwei Lernmethoden:"),l.a.createElement(u.a,{gutter:16},l.a.createElement(v.a,{span:12},l.a.createElement(y.a,{title:"Gamification",style:e.values.loggedIn&&0===e.values.gameMode?{border:"2px solid",borderColor:"#7CB6FF"}:{}},l.a.createElement("p",null,"Die ",l.a.createElement("b",null,"schnelle")," Variante",l.a.createElement("br",null),"Zus\xe4tzlich zu \xfcblichen Website Elementen gibt es Elemente, die man aus Videospielen kennt:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Fortschrittsanzeigen"),l.a.createElement("li",null,"Punkte (Sterne)"),l.a.createElement("li",null,"Rangliste"),l.a.createElement("li",null,"Auszeichnungen (Mitarbeiter-Rang)")))),l.a.createElement(v.a,{span:12},l.a.createElement(y.a,{title:"Serious Game",style:e.values.loggedIn&&1===e.values.gameMode?{border:"2px solid",borderColor:"#7CB6FF"}:{}},l.a.createElement("p",null,"Die ",l.a.createElement("b",null,"kreative")," Variante",l.a.createElement("br",null),"Zus\xe4tzlich zu den Gamification Elementen, spielst du ein Spiel und hast dort weitere interessante Elemente:"),l.a.createElement("ul",null,l.a.createElement("li",null,'Spielen/Handeln als "Robob"'),l.a.createElement("li",null,'Interagieren mit Kollegen der "IT-Things Corp."'),l.a.createElement("li",null,"Entdecken der Spielwelt"),l.a.createElement("li",null,"Aufdecken von Geheimnissen"))))),l.a.createElement("p",{style:{marginTop:"10px"}},"PS: Bei beiden Varianten musst Du die gleichen Aufgaben erledigen."),e.values.loggedIn?l.a.createElement("div",null,l.a.createElement(u.a,null,l.a.createElement(k.a.Group,{defaultValue:e.values.gameMode,style:{marginBot:"10px"},onChange:function(t){return e.values.gameMode!==t.target.value&&e.functions.setGameMode(t.target.value)}},l.a.createElement(k.a.Button,{value:0},"Gamification"),l.a.createElement(k.a.Button,{value:1},"Serious Game"))),e.values.sumStars>0&&l.a.createElement(f.a,{checked:e.values.ignoreOptional,disabled:0===e.values.nextTaskWithoutOptional,style:{marginTop:"10px"},onChange:function(t){return e.functions.setIgnoreOptional(t.target.checked)}},"Optionale Aufgaben ignorieren"),l.a.createElement("br",null),l.a.createElement(b.a,{style:{marginTop:"10px"},type:"primary",href:"/task/".concat(e.values.ignoreOptional?e.values.nextTaskWithoutOptional:e.values.nextTaskWithOptional)},e.values.sumStars?"N\xe4chste Aufgabe":"Los geht's")):l.a.createElement(w,{values:e.values,functions:e.functions}))},C=a(31),I=a(56);var x=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(""),m=Object(c.a)(i,2),d=m[0],p=m[1],b=Object(s.f)();Object(n.useEffect)((function(){"/"===window.location.pathname?p("1"):"/overview"===window.location.pathname?p("2"):"/diary"===window.location.pathname?p("3"):"/ranking"===window.location.pathname&&p("4")}),[]);var f=function(){return l.a.createElement("div",null,l.a.cloneElement(e.children,Object(C.a)({},e)))};return l.a.createElement(S.a,{style:{minHeight:"100vh"}},e.values.loggedIn&&l.a.createElement(S.a.Sider,{collapsible:!0,collapsed:r,onCollapse:function(){return o(!r)}},l.a.createElement("div",{className:"logo"}),l.a.createElement(I.a,{theme:"dark",mode:"inline",selectedKeys:[d]},l.a.createElement(I.a.Item,{style:{backgroundColor:"#002140",color:"white"}},l.a.createElement(u.a,null,e.values.username," ",e.values.employeeRank&&e.values.employeeRank.title?l.a.createElement("p",{style:{color:"#7CB6FF"}},"\xa0 (",e.values.employeeRank.title,")"):l.a.createElement("div",null))),l.a.createElement(I.a.Item,{key:"1",onClick:function(){return b.push("/")}},"Startseite"),l.a.createElement(I.a.Item,{key:"2",onClick:function(){return b.push("/overview")}},"\xdcbersicht"),l.a.createElement(I.a.Item,{key:"3",onClick:function(){return b.push("/diary")}},"Tagebuch"),l.a.createElement(I.a.Item,{key:"4",onClick:function(){return b.push("/ranking")}},"Rangliste"),l.a.createElement(I.a.Item,{key:"5",href:"/",onClick:function(){return e.functions.logOut()}},"Abmelden"))),l.a.createElement(S.a,null,l.a.createElement(S.a.Content,{style:{padding:"50px 50px"}},l.a.createElement(f,e))))},T=a(90),A=a(192),B=a(103),R=a(348),z=a(181),M=a(350),P=a(96),q=a.n(P);var W=function(e){var t=Object(s.f)();return l.a.createElement("div",null,l.a.createElement(m.a,{title:"Du bist Klasse",onBack:function(){return t.push("/overview")}}),l.a.createElement(y.a,{style:{border:"2px solid",borderColor:e.values.robobGreen,marginBottom:"10px"}},l.a.createElement("p",null,"Du hast den h\xf6chsten Rang erreicht und damit Robob durchgespielt!",l.a.createElement("br",null),"Du kannst stolz auf dich sein!")))};var F=function(e){var t=Object(s.f)();return l.a.createElement("div",null,l.a.createElement(m.a,{title:"Aufgabe ".concat(e.values.task&&e.values.task.id?e.values.task.id:""," ").concat(e.values.task&&e.values.task.optional?" (optional)":""),onBack:function(){return t.push("/overview")}}),l.a.createElement(y.a,{title:"Hoppla",style:{marginTop:"10px",border:"2px solid",borderColor:"red"}},e.values.task&&e.values.task.required_employee_rank&&e.values.employeeRank.id<e.values.task.required_employee_rank.id?l.a.createElement("p",null,"F\xfcr diese Aufgabe ben\xf6tigst du einen h\xf6heren Mitarbeiter Rang!",l.a.createElement("br",null),"Du bist bisher ",e.values.employeeRank.title?e.values.employeeRank.title:"Ranglos"," und musst mindestens ",e.values.task.required_employee_rank.title," sein.",l.a.createElement("br",null),"Um einen h\xf6heren Rang zu erreichen, erledige die letzten Aufgaben in den jeweiligen Kapiteln"):e.values.task&&e.values.task.achieve_employee_rank&&!e.functions.solvedNeededTasks(e.values.task.category_id)?l.a.createElement("p",null,"F\xfcr diese Aufgabe musst du erst die Pflicht-Aufgaben dieses Kapitels erledigen!"):e.values.task&&e.values.task.required_stars&&e.values.sumStars<e.values.task.required_stars?l.a.createElement("p",null,"F\xfcr diese Aufgabe hast Du doch nicht genug Sterne gesammelt!",l.a.createElement("br",null),"Du hast bisher ",e.values.sumStars?e.values.sumStars:0," und ben\xf6tigst mindestens ",e.values.task.required_stars,".",l.a.createElement("br",null),"Entweder du versuchst deine bisherigen Bewertungen zu verbessern oder du bearbeitest die optionalen Aufgaben."):l.a.createElement("p",null,"Hier gibt es keine Aufgabe f\xfcr dich!")))};var J=function(e){var t=Object(s.g)().id,a=Object(s.f)(),r=l.a.createRef(),o=l.a.createRef(),i=l.a.createRef(),p=Object(n.useState)(t),E=Object(c.a)(p,2),k=E[0],O=E[1],S=Object(n.useState)(!0),w=Object(c.a)(S,2),_=w[0],I=w[1],x=Object(n.useState)({}),P=Object(c.a)(x,2),J=P[0],N=P[1],D=Object(n.useState)(!1),G=Object(c.a)(D,2),L=G[0],H=G[1],V=Object(n.useState)(""),K=Object(c.a)(V,2),U=K[0],Z=K[1],Q=Object(n.useState)(!1),X=Object(c.a)(Q,2),Y=X[0],$=X[1],ee=Object(n.useState)(""),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)(!1),re=Object(c.a)(le,2),oe=re[0],ce=re[1],ie=Object(n.useState)([]),se=Object(c.a)(ie,2),ue=se[0],me=se[1],de=Object(n.useState)(!1),pe=Object(c.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)({}),he=Object(c.a)(ge,2),Ee=he[0],ve=he[1],ye=Object(n.useState)(e.values.nextTaskWithOptional),ke=Object(c.a)(ye,2),Oe=ke[0],je=ke[1],Se=Object(n.useState)(e.values.nextTaskWithoutOptional),we=Object(c.a)(Se,2),_e=we[0],Ce=we[1],Ie=Object(n.useState)(e.values.progress),xe=Object(c.a)(Ie,2),Te=xe[0],Ae=xe[1],Be=Object(n.useState)(1!=e.values.gameMode),Re=Object(c.a)(Be,2),ze=Re[0],Me=Re[1],Pe=Object(C.a)(Object(C.a)({},e.values),{},{task:J,loading:_});Object(n.useEffect)((function(){i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start"})}),[i]),Object(n.useEffect)((function(){e.values.unityContent.on("activateTask",(function(e){O(e),Me(!0),fe(!1),Z(""),$(!1),ne(""),ve({})})),e.values.unityContent.on("deactivateTask",(function(){Me(!1)})),e.values.unityContent.on("loaded",(function(){e.values.unityContent.send("EventSystem","setInputJson",JSON.stringify(e.values.progress))})),e.values.unityContent.on("saveProgress",(function(){e.functions.setProgress(Te),window.location.pathname==="/task/".concat(Oe)?window.location.reload():a.push("/task/".concat(Oe))}))}),[]),Object(n.useEffect)((function(){0!==k&&fetch("http://localhost:8000/robob/task/".concat(k),{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(t){200!==t.status?(N({}),e.functions.logOut()):t.json().then((function(t){if(N(t),t.specify&&"multiple_choice"===t.type){var a={};t.specify.options.map((function(e){a[e.id]=!1})),ve(a)}else if(t.specify&&"code"===t.type&&(Z(t.specify.placeholder_middle),1==e.values.gameMode))try{document.getElementById("textarea").value=t.specify.placeholder_middle}catch(n){console.warn(n)}})).then(I(!1))})).catch((function(e){return console.error(e)}))}),[k]),Object(n.useEffect)((function(){oe&&fetch("http://localhost:8000/robob/task/".concat(k),{method:"post",headers:{Authorization:"JWT ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({task_id:J.id,solution:ae,user_solution:"code"===J.type?J.specify.placeholder_before+"\n"+U+"\n"+J.specify.placeholder_after:ae})}).then((function(t){202===t.status?(me((function(e){return[].concat(Object(A.a)(e),[k])})),fe(!1),ce(!1),t.json().then((function(e){N(Object(C.a)(Object(C.a)({},J),{},{solved_stars:e.solved_stars})),je(e.task_with_optional),Ce(e.task_without_optional)})),fetch("http://localhost:8000/robob/actual-progress",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(t){200!==t.status?e.functions.logOut():t.json().then((function(t){Ae(t),e.values.unityContent.send("EventSystem","setInputJson",JSON.stringify(t))}))})).catch((function(e){return console.error(e)}))):200===t.status?(fe(!0),ce(!1),t.json().then((function(e){N(Object(C.a)(Object(C.a)({},J),{},{tries:e.tries}))}))):e.functions.logOut()})).catch((function(e){return console.error(e)})),ue.some((function(e){return e===k}))&&r.current&&r.current.scrollIntoView({behavior:"smooth",block:"start"})}),[oe]);var qe=function(){return L&&{color:"green",backgroundColor:"black"}},We=function(){return oe?{}:be?{border:"2px solid",borderColor:"red"}:ue.some((function(e){return e===k}))&&{border:"2px solid",borderColor:e.values.robobGreen}};return l.a.createElement("div",null,_?l.a.createElement(z.a,{indicator:l.a.createElement(M.a,{style:{fontSize:24},spin:!0}),style:{display:"flex",justifyContent:"center"}}):k&&0!=k?1==e.values.gameMode||Object.entries(J).length>0&&!(J.required_employee_rank&&e.values.employeeRank.id<J.required_employee_rank.id||J.achieve_employee_rank&&!e.functions.solvedNeededTasks(J.category_id)||J.required_stars&&e.values.sumStars<J.required_stars)?l.a.createElement("div",null,e.values.gameMode?l.a.createElement(u.a,{ref:o,justify:"space-between",align:"middle"},l.a.createElement(m.a,{title:"Robob",onBack:function(){return a.push("/overview")}}),l.a.createElement("div",{style:{marginRight:"16px"}},Te.sum_stars," ",l.a.createElement(g.a,null))):l.a.createElement(u.a,{justify:"space-between",align:"middle"},e.values.gameMode?l.a.createElement(m.a,{title:"Aufgabe ".concat(J.id?J.id:""," ").concat(J.optional?" (optional)":"")}):l.a.createElement(m.a,{title:"Aufgabe ".concat(J.id?J.id:""," ").concat(J.optional?" (optional)":""),onBack:function(){return a.push("/overview")}}),"Fehlversuche: ",J.tries?J.tries:0,J.stars>0?l.a.createElement("div",null,3===J.stars?l.a.createElement(g.a,null):l.a.createElement(h.a,null),J.stars>=2?l.a.createElement(g.a,null):l.a.createElement(h.a,null),l.a.createElement(g.a,null)):l.a.createElement("div",null)),1==e.values.gameMode&&l.a.createElement("div",{onClick:function(){e.values.unityContent.send("EventSystem","enableKeyboard"),console.log("enabledKeyboard")}},l.a.createElement(q.a,{unityContent:e.values.unityContent})),ze&&l.a.createElement("div",{ref:i},1==e.values.gameMode&&l.a.createElement(u.a,{justify:"space-between",align:"middle"},e.values.gameMode?l.a.createElement(m.a,{title:"Aufgabe ".concat(J.id?J.id:""," ").concat(J.optional?" (optional)":"")}):l.a.createElement(m.a,{title:"Aufgabe ".concat(J.id?J.id:""," ").concat(J.optional?" (optional)":""),onBack:function(){return a.push("/overview")}}),"Fehlversuche: ",J.tries?J.tries:0,J.stars>0?l.a.createElement("div",null,3===J.stars?l.a.createElement(g.a,null):l.a.createElement(h.a,null),J.stars>=2?l.a.createElement(g.a,null):l.a.createElement(h.a,null),l.a.createElement(g.a,null)):l.a.createElement("div",null)),l.a.createElement(y.a,{title:"Aufgabenstellung",style:{marginBottom:"10px"}},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:J.description}})),J.knowledge&&l.a.createElement(d.a,{defaultActiveKey:"1",style:{marginBottom:"10px"}},l.a.createElement(d.a.Panel,{key:"1",header:"Info"},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:J.knowledge}}),l.a.createElement("p",{style:{marginTop:"10px",color:"grey"}},"PS: Du kannst alle Infos auch nochmal im ",l.a.createElement("a",{href:"/diary"},"Tagebuch")," nachlesen"))),J.specify&&("input"===J.type?l.a.createElement(y.a,{style:Object(C.a)({},We())},J.specify.inputs.map((function(e){return l.a.createElement(j.a,{addonBefore:e.label,disabled:ue.some((function(e){return e===k})),spellCheck:!1,placeholder:e.placeholder,onChange:function(){return ve(Object(C.a)(Object(C.a)({},Ee),{},Object(T.a)({},e.id,document.getElementById("input ".concat(e.id)).value)))},id:"input ".concat(e.id),style:{marginBottom:"5px"}})}))):"select"===J.type?l.a.createElement(y.a,{style:Object(C.a)({},We())},J.specify.selects.map((function(e){return l.a.createElement("div",null,l.a.createElement("label",null,e.label," "),l.a.createElement(B.a,{style:{marginBottom:"5px"},key:e.id,disabled:ue.some((function(e){return e===k})),defaultValue:"Ausw\xe4hlen",onSelect:function(t){return ve(Object(C.a)(Object(C.a)({},Ee),{},Object(T.a)({},e.id,t)))}},e.options.map((function(e){return l.a.createElement(B.a.Option,{value:e},e)}))))}))):"multiple_choice"===J.type?l.a.createElement(y.a,{style:Object(C.a)({},We())},J.specify.options.map((function(e){return l.a.createElement(f.a,{disabled:ue.some((function(e){return e===k})),id:e.id,onChange:function(e){return ve(Object(C.a)(Object(C.a)({},Ee),{},Object(T.a)({},e.target.id,e.target.checked)))}},e.text)}))):"code"===J.type&&l.a.createElement("div",null,l.a.createElement(y.a,{title:"Code-Eingabe",headStyle:Object(C.a)({},qe()),style:Object(C.a)(Object(C.a)({},qe()),We())},l.a.createElement("p",{style:{fontFamily:"Hack",whiteSpace:"pre-line"}},J.specify.placeholder_before),l.a.createElement(j.a.TextArea,{disabled:ue.some((function(e){return e===k})),style:Object(C.a)({fontFamily:"Hack"},qe()),onKeyDown:function(e){if(9===e.keyCode){e.preventDefault();var t=e.target.selectionEnd;e.target.value=e.target.value.substring(0,t)+"\t"+e.target.value.substring(t,e.target.value.length),e.target.selectionEnd=t+1}},defaultValue:J.specify.placeholder_middle?J.specify.placeholder_middle:"",onChange:function(){return Z(document.getElementById("textarea").value)},spellCheck:!1,id:"textarea",rows:5}),l.a.createElement("p",{style:{fontFamily:"Hack",whiteSpace:"pre-line"}},J.specify.placeholder_after)),l.a.createElement(y.a,{title:"Ausgabe",headStyle:Object(C.a)({},qe()),style:Object(C.a)(Object(C.a)({marginTop:"10px"},Y&&{border:"2px solid",borderColor:"red"}),qe())},l.a.createElement("p",{style:{fontFamily:"Hack"}},ae)))),l.a.createElement(u.a,{style:{marginTop:"10px"},justify:"space-between"},l.a.createElement(v.a,null,l.a.createElement(b.a,{disabled:ue.some((function(e){return e===k})),type:"primary",onClick:function(){ce(!0),function(){if(J.specify)if("code"===J.type){var e="",t='"use strict";\n'+J.specify.placeholder_before+"\n"+U+"\n"+J.specify.placeholder_after;try{var a=new Function(t)();e=void 0===a?"":String(a),$(!1)}catch(n){e="Error: "+n.message,$(!0)}ne(e)}else"multiple_choice"!==J.type&&"select"!==J.type&&"input"!==J.type||ne(JSON.stringify(Ee))}()}},"Best\xe4tigen")),J.specify&&"code"===J.type&&l.a.createElement(v.a,null,l.a.createElement("label",null,"Hacker-Mode "),l.a.createElement(R.a,{style:{flexDirection:"row",justifyContent:"flex-end"},onChange:function(e){H(e),document.getElementById("textarea").value=U}}))),ue.some((function(e){return e===k}))?l.a.createElement(y.a,{style:{backgroundColor:e.values.robobGreen,marginTop:"10px"}},l.a.createElement("h1",{style:{color:"white"}},"Geschafft!"),J.solved_stars>0?l.a.createElement("div",null,3===J.solved_stars?l.a.createElement(g.a,{style:{color:"yellow"}}):l.a.createElement(h.a,null),J.solved_stars>=2?l.a.createElement(g.a,{style:{color:"yellow"}}):l.a.createElement(h.a,null),l.a.createElement(g.a,{style:{color:"yellow"}})):l.a.createElement("div",null),J.achieve_employee_rank&&J.achieve_employee_rank.id>e.values.employeeRank.id&&l.a.createElement("p",null,"Herzlichen Gl\xfcckwunsch, du bist jetzt ein ",J.achieve_employee_rank.title),l.a.createElement(f.a,{checked:e.values.ignoreOptional,disabled:0===_e,style:{marginTop:"20px",color:"white"},onChange:function(t){return e.functions.setIgnoreOptional(t.target.checked)}},"Optionale Aufgaben ignorieren"),l.a.createElement("br",null),l.a.createElement(u.a,{style:{marginTop:"10px"},justify:"space-between"},l.a.createElement(b.a,{type:"primary",href:"/task/".concat(e.values.ignoreOptional?_e:Oe)},e.values.gameMode?"Ergebnis speichern & Tag beenden":"Ergebnis speichern & Fortsetzen"),1==e.values.gameMode&&l.a.createElement(b.a,{onClick:function(){o.current.scrollIntoView({behavior:"smooth",block:"start"}),e.values.unityContent.send("EventSystem","enableKeyboard")}},"Zur\xfcck zum Spiel"))):l.a.createElement("div",null)),l.a.createElement("div",{ref:r})):l.a.createElement(F,{values:Pe,functions:e.functions}):e.values.employeeRank&&6===e.values.employeeRank.id?l.a.createElement(W,{values:Pe,functions:e.functions}):l.a.createElement(F,{values:Pe,functions:e.functions}))};var N=function(e){return l.a.createElement("div",null,l.a.createElement(m.a,{title:"Tagebuch"}),l.a.createElement(d.a,null,e.values.diary.map((function(e){return l.a.createElement(d.a.Panel,{header:e.title,key:e.id},e.knowledge.map((function(e){return l.a.createElement(y.a,{style:{marginTop:"5px",border:"2px solid",borderColor:"#7CB6FF"}},l.a.createElement("div",{key:e.id,dangerouslySetInnerHTML:{__html:e.description}}))})))}))))},D=a(341);var G=function(e){var t=Object(n.useState)(!0),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],d=s[1],p=Object(n.useState)(-1),b=Object(c.a)(p,2),f=b[0],g=b[1];return Object(n.useEffect)((function(){fetch("http://localhost:8000/robob/ranking",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(t){200!==t.status?(d([]),e.functions.logOut()):t.json().then((function(e){d(e),o(!1)}))})).catch((function(e){return console.error(e)}))}),[e.functions]),l.a.createElement("div",null,l.a.createElement(m.a,{title:"Rangliste"}),r?l.a.createElement(z.a,{indicator:l.a.createElement(M.a,{style:{fontSize:24},spin:!0}),style:{display:"flex",justifyContent:"center"}}):l.a.createElement(D.a,{onRow:function(t,a){return t.username===e.values.username&&g(a)},rowClassName:function(e,t){return t===f&&"highlight-row"},dataSource:u,pagination:!1},l.a.createElement(D.a.Column,{title:"Platzierung",dataIndex:"place",key:"place"}),l.a.createElement(D.a.Column,{title:"Benutzer",dataIndex:"username",key:"username"}),l.a.createElement(D.a.Column,{title:"Sterne",dataIndex:"stars",key:"stars"}),l.a.createElement(D.a.Column,{title:"Mitarbeiter Rang",dataIndex:"employee_rank",key:"employee_rank"})))};var L=function(){var e=Object(n.useState)(!!localStorage.getItem("token")),t=Object(c.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),u=Object(c.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(null),b=Object(c.a)(p,2),f=b[0],g=b[1],h=Object(n.useState)(0),v=Object(c.a)(h,2),y=v[0],k=v[1],O=Object(n.useState)({id:0,title:null}),j=Object(c.a)(O,2),S=j[0],w=j[1],C=Object(n.useState)(!1),I=Object(c.a)(C,2),T=I[0],A=I[1],B=Object(n.useState)(0),R=Object(c.a)(B,2),z=R[0],M=R[1],q=Object(n.useState)(0),W=Object(c.a)(q,2),F=W[0],D=W[1],L=Object(n.useState)(!1),H=Object(c.a)(L,2),V=H[0],K=H[1],U=Object(n.useState)([]),Z=Object(c.a)(U,2),Q=Z[0],X=Z[1],Y=Object(n.useState)([]),$=Object(c.a)(Y,2),ee=$[0],te=$[1],ae=Object(n.useState)({}),ne=Object(c.a)(ae,2),le=ne[0],re=ne[1],oe=new P.UnityContent("/Build/game.json","/Build/UnityLoader.js");Object(n.useEffect)((function(){a&&(fetch("http://localhost:8000/robob/current_user/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){d(e.username),!1===e.game_mode?g(0):g(1),w(e.employee_rank)})).catch((function(e){console.error(e),ce()})),fetch("http://localhost:8000/token-auth-refresh/",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})}).then((function(e){200!==e.status?(console.error(e),ce()):e.json().then((function(e){localStorage.setItem("token",e.token),A(!1)}))})).catch((function(e){console.error(e),ce()})),fetch("http://localhost:8000/robob/actual-progress",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){200!==e.status?(X([]),te([]),ce()):e.json().then((function(e){X(e.categories),te(e.diary),k(e.sum_stars),w(e.employee_rank),re(e)}))})).catch((function(e){return console.error(e)})),fetch("http://localhost:8000/robob/next-task/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){200!==e.status?ce():e.json().then((function(e){M(e.task_with_optional),D(e.task_without_optional)}))})).catch((function(e){return console.error(e)})))}),[a]),Object(n.useEffect)((function(){a&&null!=f&&fetch("http://localhost:8000/robob/game-mode/".concat(f),{method:"post",headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).catch((function(e){return console.error(e)}))}),[f]);var ce=function(){localStorage.removeItem("token"),r(!1),A(!0),d("")},ie={loggedIn:a,username:m,gameMode:f,sumStars:y,employeeRank:S,categories:Q,diary:ee,progress:le,nextTaskWithOptional:z,nextTaskWithoutOptional:F,ignoreOptional:V,robobGreen:"#52C41A",unityContent:oe},se={setLoggedIn:r,setUsername:d,setGameMode:g,setSumStars:k,setCategories:X,setDiary:te,setNextTaskWithOptional:M,setNextTaskWithoutOptional:D,setIgnoreOptional:K,setProgress:re,logOut:ce,solvedNeededTasks:function(e){var t=!0;try{Q.filter((function(t){return t.id===e}))[0].tasks.forEach((function(e){e.achieve_employee_rank||e.optional||e.solved||(t=!1)}))}catch(a){console.error(a)}return t}};return l.a.createElement(i.a,null,l.a.createElement(s.b,{exact:!0,path:"/"},l.a.createElement(x,{values:ie,functions:se},l.a.createElement(_,null))),l.a.createElement(s.b,{path:"/overview"},T?l.a.createElement(s.a,{to:"/"}):l.a.createElement(x,{values:ie,functions:se},l.a.createElement(E,null))),l.a.createElement(s.b,{path:"/diary"},T?l.a.createElement(s.a,{to:"/"}):l.a.createElement(x,{values:ie,functions:se},l.a.createElement(N,null))),l.a.createElement(s.b,{path:"/task/:id"},T?l.a.createElement(s.a,{to:"/"}):l.a.createElement(x,{values:ie,functions:se},l.a.createElement(J,null))),l.a.createElement(s.b,{path:"/ranking"},T?l.a.createElement(s.a,{to:"/"}):l.a.createElement(x,{values:ie,functions:se},l.a.createElement(G,null))))};o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(L,null)),document.getElementById("root"))}},[[197,1,2]]]);
//# sourceMappingURL=main.a9f8c489.chunk.js.map